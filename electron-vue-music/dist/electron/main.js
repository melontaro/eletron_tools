module.exports=function(e){function t(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,s){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=39)}([function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e,t,o){var s=o(30)('wks'),r=o(31),i=o(0).Symbol,a='function'==typeof i,n=e.exports=function(e){return s[e]||(s[e]=a&&i[e]||(a?i:r)('Symbol.'+e))};n.store=s},function(e){var t=e.exports={version:'2.5.7'};'number'==typeof __e&&(__e=t)},function(e,t,o){var s=o(5);e.exports=function(e){if(!s(e))throw TypeError(e+' is not an object!');return e}},function(e,t,o){var s=o(11),r=o(28);e.exports=o(6)?function(e,t,o){return s.f(e,t,r(1,o))}:function(e,t,o){return e[t]=o,e}},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,o){e.exports=!o(27)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e){e.exports={}},function(e,t,o){var s=o(0),r=o(2),i=o(9),a=o(4),n=o(12),c='prototype',d=function(e,t,o){var l,u,p,m=e&d.F,g=e&d.G,f=e&d.S,k=e&d.P,y=e&d.B,C=e&d.W,h=g?r:r[t]||(r[t]={}),_=h[c],T=g?s:f?s[t]:(s[t]||{})[c];for(l in g&&(o=t),o)u=!m&&T&&void 0!==T[l],u&&n(h,l)||(p=u?T[l]:o[l],h[l]=g&&'function'!=typeof T[l]?o[l]:y&&u?i(p,s):C&&T[l]==p?function(e){var t=function(t,o,s){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o);}return new e(t,o,s)}return e.apply(this,arguments)};return t[c]=e[c],t}(p):k&&'function'==typeof p?i(Function.call,p):p,k&&((h.virtual||(h.virtual={}))[l]=p,e&d.R&&_&&!_[l]&&a(_,l,p)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},function(e,t,o){var s=o(10);e.exports=function(e,t,o){return(s(e),void 0===t)?e:1===o?function(o){return e.call(t,o)}:2===o?function(o,s){return e.call(t,o,s)}:3===o?function(o,s,r){return e.call(t,o,s,r)}:function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e,t,o){var s=o(3),r=o(51),i=o(52),a=Object.defineProperty;t.f=o(6)?Object.defineProperty:function(e,t,o){if(s(e),t=i(t,!0),s(o),r)try{return a(e,t,o)}catch(t){}if('get'in o||'set'in o)throw TypeError('Accessors not supported!');return'value'in o&&(e[t]=o.value),e}},function(e){var t={}.hasOwnProperty;e.exports=function(e,o){return t.call(e,o)}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e){var t=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?o:t)(e)}},function(e){e.exports=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e}},function(e){e.exports=!0},function(e,t,o){var s=o(5),r=o(0).document,i=s(r)&&s(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},function(e,t,o){var s=o(59),r=o(15);e.exports=function(e){return s(r(e))}},function(e,t,o){var s=o(30)('keys'),r=o(31);e.exports=function(e){return s[e]||(s[e]=r(e))}},function(e,t,o){var s=o(11).f,r=o(12),i=o(1)('toStringTag');e.exports=function(e,t,o){e&&!r(e=o?e:e.prototype,i)&&s(e,i,{configurable:!0,value:t})}},function(e,t,o){'use strict';function s(e){var t,o;this.promise=new e(function(e,s){if(t!=void 0||o!=void 0)throw TypeError('Bad Promise constructor');t=e,o=s}),this.resolve=r(t),this.reject=r(o)}var r=o(10);e.exports.f=function(e){return new s(e)}},function(e){e.exports=require('path')},function(e){e.exports=require('express')},function(e,t,o){e.exports={default:o(44),__esModule:!0}},function(e){e.exports=require('crypto')},function(e,t,o){'use strict';var s=o(16),r=o(8),i=o(53),a=o(4),n=o(7),c=o(54),d=o(20),l=o(62),u=o(1)('iterator'),p=!([].keys&&'next'in[].keys()),m='keys',g='values',f=function(){return this};e.exports=function(e,t,o,k,y,C,h){c(o,t,k);var _,T,S,A=function(e){return!p&&e in E?E[e]:e===m?function(){return new o(this,e)}:e===g?function(){return new o(this,e)}:function(){return new o(this,e)}},q=t+' Iterator',P=y==g,O=!1,E=e.prototype,w=E[u]||E['@@iterator']||y&&E[y],v=w||A(y),x=y?P?A('entries'):v:void 0,b='Array'==t?E.entries||w:w;if(b&&(S=l(b.call(new e)),S!==Object.prototype&&S.next&&(d(S,q,!0),!s&&'function'!=typeof S[u]&&a(S,u,f))),P&&w&&w.name!==g&&(O=!0,v=function(){return w.call(this)}),(!s||h)&&(p||O||!E[u])&&a(E,u,v),n[t]=v,n[q]=f,y)if(_={values:P?v:A(g),keys:C?v:A(m),entries:x},h)for(T in _)T in E||i(E,T,_[T]);else r(r.P+r.F*(p||O),t,_);return _}},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,o){var s=o(14),r=Math.min;e.exports=function(e){return 0<e?r(s(e),9007199254740991):0}},function(e,t,o){var s=o(2),r=o(0),i='__core-js_shared__',a=r[i]||(r[i]={});(e.exports=function(e,t){return a[e]||(a[e]=t===void 0?{}:t)})('versions',[]).push({version:s.version,mode:o(16)?'pure':'global',copyright:'\xA9 2018 Denis Pushkarev (zloirock.ru)'})},function(e){var t=0,o=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+o).toString(36))}},function(e){e.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(e,t,o){var s=o(0).document;e.exports=s&&s.documentElement},function(e,t,o){var s=o(13),r=o(1)('toStringTag'),i='Arguments'==s(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,o,n;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(o=a(t=Object(e),r))?o:i?s(t):'Object'==(n=s(t))&&'function'==typeof t.callee?'Arguments':n}},function(e,t,o){var s=o(3),r=o(10),i=o(1)('species');e.exports=function(e,t){var o,a=s(e).constructor;return a===void 0||(o=s(a)[i])==void 0?t:r(o)}},function(e,t,o){var s,r,i,a=o(9),n=o(74),c=o(33),d=o(17),l=o(0),u=l.process,p=l.setImmediate,m=l.clearImmediate,g=l.MessageChannel,f=l.Dispatch,k=0,y={},C='onreadystatechange',h=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){h.call(e.data)};p&&m||(p=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return y[++k]=function(){n('function'==typeof e?e:Function(e),t)},s(k),k},m=function(e){delete y[e]},'process'==o(13)(u)?s=function(e){u.nextTick(a(h,e,1))}:f&&f.now?s=function(e){f.now(a(h,e,1))}:g?(r=new g,i=r.port2,r.port1.onmessage=_,s=a(i.postMessage,i,1)):l.addEventListener&&'function'==typeof postMessage&&!l.importScripts?(s=function(e){l.postMessage(e+'','*')},l.addEventListener('message',_,!1)):C in d('script')?s=function(e){c.appendChild(d('script'))[C]=function(){c.removeChild(this),h.call(e)}}:s=function(e){setTimeout(a(h,e,1),0)}),e.exports={set:p,clear:m}},function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,o){var s=o(3),r=o(5),i=o(21);e.exports=function(e,t){if(s(e),r(t)&&t.constructor===e)return t;var o=i.f(e),a=o.resolve;return a(t),o.promise}},function(e,t,o){'use strict';function s(){var e=d();e.all('*',function(e,t,o){'/'===e.path||e.path.includes('.')||(t.header('Access-Control-Allow-Credentials',!0),t.header('Access-Control-Allow-Origin',e.headers.origin||'*'),t.header('Access-Control-Allow-Headers','X-Requested-With'),t.header('Access-Control-Allow-Methods','PUT,POST,GET,DELETE,OPTIONS'),t.header('Content-Type','application/json;charset=utf-8')),o()});e.use(m('2 minutes',function(e,t){return 200===t.statusCode})),e.use(d.static(u.resolve(__dirname,'public'))),e.use(function(e,t,o){var s=e.query.proxy;s&&(e.headers.cookie+='__proxy__'+s),o()}),e.use('/',a.a);var t=3e3;e.listen(t,function(){console.log('server running @ http://localhost:'+t)}),n=new r.BrowserWindow({height:800,useContentSize:!0,width:1200,frame:!1,resizable:!1,skipTaskbar:!1,transparent:!1,title:'\u5C0F\u571F\u72D7\u97F3\u4E50',autoHideMenuBar:!0,x:0,y:0}),n.loadURL(c),n.on('closed',function(){n=null})}Object.defineProperty(t,'__esModule',{value:!0});var r=o(40),i=o.n(r),a=o(43);global.__static=o(22).join(__dirname,'/static').replace(/\\/g,'\\\\');var n=void 0,c='file://'+__dirname+'/index.html',d=o(23),l=o(41),u=o(22),p=o(42),m=l.middleware;r.app.on('ready',s),r.app.on('window-all-closed',function(){'darwin'!==process.platform&&r.app.quit()}),r.app.on('activate',function(){null===n&&s()}),r.ipcMain.on('close',function(){n.close()}),r.ipcMain.on('minimize',function(){n.minimize()})},function(e){e.exports=require('electron')},function(e){e.exports=require('apicache')},function(e){e.exports=require('fs')},function(e,t,o){'use strict';var s=o(24),r=o.n(s),i=o(45),a=o(25),n=o(23),c=n.Router();c.get('/album',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id;Object(i.a)('music.163.com','/weapi/v1/album/'+s,'POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artist/album',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id,r={offset:e.query.offset||0,total:!0,limit:e.query.limit||30,csrf_token:''};Object(i.a)('music.163.com','/weapi/artist/albums/'+s,'POST',r,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artist/desc',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id;Object(i.a)('music.163.com','/weapi/artist/introduction','POST',{id:s,csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artist/list',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={categoryCode:e.query.cat||'1001',offset:e.query.offset||0,total:e.query.total?'true':'false',limit:e.query.limit||30,initial:(e.query.initial||'').toUpperCase().charCodeAt()||''};Object(i.a)('music.163.com','/weapi/artist/list','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artist/mv',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id,r={artistId:s,total:!0,offset:e.query.offset,limit:e.query.limit,csrf_token:''};Object(i.a)('music.163.com','/weapi/artist/mvs','POST',r,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artist/sub',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={artistId:''+e.query.id};Object(i.a)('music.163.com','/weapi/artist/sub','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artist/sublist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={offset:e.query.offset||0,total:e.query.total?'true':'false',limit:e.query.limit||25};Object(i.a)('music.163.com','/weapi/artist/sublist','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/artists',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id;Object(i.a)('music.163.com','/weapi/v1/artist/'+s,'POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/banner',function(e,t,o){var s={url:'http://music.163.com/discover',method:'GET',headers:{Referer:'http://music.163.com',"User-Agent":'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3380.0 Safari/537.36'}};Object(i.b)(s,function(e,o,s){if(e)t.status(502).send('fetch error');else try{var i=/<script[^>]*>\s*window\.Gbanners\s*=\s*([^;]+?);\s*<\/script>/g,a=i.exec(s)[1];t.send(r()(eval('({code:200,banners:'+a+'})')))}catch(e){t.status(502).send('fetch error')}})}),c.get('/check/music',function(e,t){var o=parseInt(e.query.id),s=parseInt(e.query.br||999000),r=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/song/enhance/player/url','POST',{ids:[o],br:s,csrf_token:''},r,function(e){return 200==JSON.parse(e).code?t.send({success:!0,message:'ok'}):t.send({success:!1,message:'\u4EB2\u7231\u7684,\u6682\u65E0\u7248\u6743'})},function(){t.status(502).send('fetch error')})}),c.get('/comment/album',function(e,t){var o=e.query.id,s=e.get('Cookie')?e.get('Cookie'):'',r={offset:e.query.offset||0,rid:o,limit:e.query.limit||20,csrf_token:''};Object(i.a)('music.163.com','/weapi/v1/resource/comments/R_AL_3_'+o+'/?csrf_token=','POST',r,s,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/comment/dj',function(e,t){var o=e.query.id,s=e.get('Cookie')?e.get('Cookie'):'',r={offset:e.query.offset||0,rid:o,limit:e.query.limit||20,csrf_token:''};Object(i.a)('music.163.com','/weapi/v1/resource/comments/A_DJ_1_'+o+'/?csrf_token=','POST',r,s,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/comment/like',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.cid,r=e.query.id,a={0:'R_SO_4_',1:'R_MV_5_',2:'A_PL_0_',3:'R_AL_3_',4:'A_DJ_1_'}[e.query.type],n=1==e.query.t?'like':'unlike';Object(i.a)('music.163.com','/weapi/v1/comment/'+n,'POST',{threadId:''+a+r,commentId:s,csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/comment/music',function(e,t){var o=e.query.id,s=e.get('Cookie')?e.get('Cookie'):'',r={offset:e.query.offset||0,rid:o,limit:e.query.limit||20,csrf_token:''};Object(i.a)('music.163.com','/weapi/v1/resource/comments/R_SO_4_'+o+'/?csrf_token=','POST',r,s,function(e){t.send(e)},function(e){return t.status(502).send(e.message)})}),c.get('/comment/mv',function(e,t){var o=e.query.id,s=e.get('Cookie')?e.get('Cookie'):'',r={offset:e.query.offset||0,rid:o,limit:e.query.limit||20,csrf_token:''};Object(i.a)('music.163.com','/weapi/v1/resource/comments/R_MV_5_'+o+'/?csrf_token=','POST',r,s,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/comment/playlist',function(e,t){var o=e.query.id,s=e.get('Cookie')?e.get('Cookie'):'',r={offset:e.query.offset||0,rid:o,limit:e.query.limit||20,csrf_token:''};Object(i.a)('music.163.com','/weapi/v1/resource/comments/A_PL_0_'+o+'/?csrf_token=','POST',r,s,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/daily/signin',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.type||0;Object(i.a)('music.163.com','/weapi/point/dailyTask','POST',{csrf_token:'',type:s},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/catelist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/djradio/category/get','POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/detail',function(e,t){var o=e.query.rid,s=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/djradio/get','POST',{id:o,csrf_token:''},s,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/hot',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={cat:e.query.type,cateId:e.query.type,type:e.query.type,categoryId:e.query.type,category:e.query.type,limit:e.query.limit,offset:e.query.offset,csrf_token:''};Object(i.a)('music.163.com','/weapi/djradio/hot/v1','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/paygift',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={csrf_token:'',limit:e.query.limit||10,offset:e.query.offset||0};Object(i.a)('music.163.com','/weapi/djradio/home/paygift/list?_nmclfl=1','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/program',function(e,t){var o=e.query.rid,s=e.get('Cookie')?e.get('Cookie'):'',r={asc:e.query.asc,radioId:o,limit:e.query.limit||30,offset:e.query.offset||0,csrf_token:''};Object(i.a)('music.163.com','/weapi/dj/program/byradio','POST',r,s,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/program/detail',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={id:e.query.id,csrf_token:''};Object(i.a)('music.163.com','/weapi/dj/program/detail','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/recommend',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/djradio/recommend/v1','POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/recommend/type',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={cateId:e.query.type,csrf_token:''};Object(i.a)('music.163.com','/weapi/djradio/recommend','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/sub',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={id:e.query.rid,csrf_token:''},r=1==e.query.t?'sub':'unsub';Object(i.a)('music.163.com','/weapi/djradio/'+r,'POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/dj/sublist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={offset:e.query.offset||0,total:e.query.total?'true':'false',limit:e.query.limit||30};Object(i.a)('music.163.com','/weapi/djradio/get/subed','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/event',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/event/get','POST',{csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/fm/trash',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id,r=e.query.time||25;Object(i.a)('music.163.com','/weapi/radio/trash/add?alg='+'RT'+'&songId='+s+'&time='+r,'POST',{csrf_token:'',songId:s},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/follow',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s='add'==e.query.type?'follow':'delfollow',r=e.query.id;Object(i.a)('music.163.com','/weapi/user/'+s+'/'+r,'POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/like',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id,r=e.query.like||!0,a=e.query.alg||'itembased',n=e.query.time||25;Object(i.a)('music.163.com','/weapi/radio/like?alg='+a+'&trackId='+s+'&like='+r+'&time='+n,'POST',{csrf_token:'',trackId:s,like:r},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/likelist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={uid:e.query.uid,csrf_token:''};Object(i.a)('music.163.com','/weapi/song/like/get','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/logWeb',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/feedback/weblog','POST',{csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/login',function(e,t){var o=e.query.email,s=e.get('Cookie')?e.get('Cookie'):'',r=a.createHash('md5');r.update(e.query.password);var n={username:o,password:r.digest('hex'),rememberLogin:'true'};console.log(o,e.query.password),Object(i.a)('music.163.com','/weapi/login','POST',n,s,function(e,o){o=o&&o.map(function(e){return e.replace('Domain=.music.163.com','')}),t.set({"Set-Cookie":o}),t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/login/cellphone',function(e,t){var o=e.query.phone,s=e.get('Cookie')?e.get('Cookie'):'',r=a.createHash('md5');r.update(e.query.password);var n={phone:o,password:r.digest('hex'),rememberLogin:'true'};Object(i.a)('music.163.com','/weapi/login/cellphone','POST',n,s,function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];'appver=1.5.9;os=osx; channel=netease;osver=\xE7\x89\x88\xE6\x9C\xAC 10.13.2\xEF\xBC\x88\xE7\x89\x88\xE5\x8F\xB7 17C88\xEF\xBC\x89'.split(';').forEach(function(e){o.push(e+';Path=/')}),t.set({"Set-Cookie":o}),t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/login/refresh',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/login/token/refresh','POST',{csrf_token:''},o,function(e,o){t.set({"Set-Cookie":o}),t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/lyric',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id;Object(i.a)('music.163.com','/weapi/song/lyric?os=osx&id='+s+'&lv=-1&kv=-1&tv=-1','POST',{},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/music/url',function(e,t){var o=e.query.id,s=e.query.br||999000,r=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/song/enhance/player/url','POST',{ids:[o],br:s,csrf_token:''},r,function(e){t.setHeader('Content-Type','application/json'),t.send(e)},function(){t.status(502).send('fetch error')})}),c.get('/mv',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.mvid;Object(i.a)('music.163.com','/weapi/mv/detail','POST',{id:s},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/mv/first',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={total:!0,limit:e.query.limit||30,csrf_token:''};Object(i.a)('music.163.com','/weapi/mv/first','POST',s,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/mv/url',function(e,t){var o=e.query.url;Object(i.b)({header:{Referer:'http://music.163.com/',Cookie:'appver=1.5.0.75771;',"Content-Type":'video/mp4',Location:o},url:o}).on('error',function(e){t.send({err:e})}).pipe(t)}),c.get('/personal/fm',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/radio/get','POST',{csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/personalized',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={limit:e.query.limit||30,offset:e.query.limit||0,total:!0,n:1e3,csrf_token:''};Object(i.a)('music.163.com','/weapi/personalized/playlist','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/personalized/djprogram',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/personalized/djprogram','POST',{},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/personalized/mv',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/personalized/mv','POST',{},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/personalized/newsong',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/personalized/newsong','POST',{type:'recommend'},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/personalized/privatecontent',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/personalized/privatecontent','POST',{},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/playlist/catlist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/playlist/catalogue','POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/playlist/create',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={name:e.query.name,csrf_token:''};Object(i.a)('music.163.com','/weapi/playlist/create','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/playlist/detail',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={id:e.query.id,n:1e5,s:e.query.s||8,csrf_token:''};Object(i.a)('music.163.com','/weapi/v3/playlist/detail','POST',s,o,function(e){t.send(e)},function(){t.status(502).send('fetch error')})}),c.get('/playlist/hot',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/playlist/hottags','POST',{},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/playlist/subscribe',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={id:e.query.id,csrf_token:''},r=1==e.query.t?'subscribe':'unsubscribe';Object(i.a)('music.163.com','/weapi/playlist/'+r,'POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/playlist/tracks',function(e,t){var o=e.query.op,s=e.query.pid,r=e.query.tracks,a=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/playlist/manipulate/tracks','POST',{op:o,pid:s,trackIds:'['+r+']',csrf_token:''},a,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/playlist/update',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id,r=e.query.desc||'',a=e.query.tags||'',n=e.query.name;Object(i.a)('music.163.com','/weapi/batch','POST',{"/api/playlist/desc/update":'{"id":'+s+',"desc":"'+r+'"}',"/api/playlist/tags/update":'{"id":'+s+',"tags":"'+a+'"}',"/api/playlist/update/name":'{"id":'+s+',"name":"'+n+'"}',csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/program/recommend',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={cateId:e.query.type,csrf_token:''};Object(i.a)('music.163.com','/weapi/program/recommend/v1','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/recommend/dislike',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/radio/get','POST',{csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/recommend/resource',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/discovery/recommend/resource','POST',{csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/recommend/songs',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/discovery/recommend/songs','POST',{offset:0,total:!0,limit:20,csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/related/playlist',function(e,t){var o={url:'http://music.163.com/playlist?id='+e.query.id,method:'GET',headers:{Referer:'http://music.163.com',"User-Agent":'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3380.0 Safari/537.36'}};Object(i.b)(o,function(e,o,s){if(e)t.status(502).send('fetch error');else try{for(var i=/<div class="cver u-cover u-cover-3">[\s\S]*?<img src="([^"]+)">[\s\S]*?<a class="sname f-fs1 s-fc0" href="([^"]+)"[^>]*>([^<]+?)<\/a>[\s\S]*?<a class="nm nm f-thide s-fc3" href="([^"]+)"[^>]*>([^<]+?)<\/a>/g,a={playlists:[],code:200},n=void 0;null!=(n=i.exec(s));)a.playlists.push({creator:{userId:n[4].slice(14),nickname:n[5]},coverImgUrl:n[1].slice(0,-12),name:n[3],id:n[2].slice(13)});t.send(r()(a))}catch(e){t.status(502).send('fetch error')}})}),c.get('/resource/like',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={threadId:e.query.id,csrf_token:''},r=1==e.query.t?'like':'unlike';Object(i.a)('music.163.com','/weapi/resource/'+r,'POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/search',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.keywords,r=e.query.type||1,a=e.query.limit||30,n=e.query.offset||0;Object(i.a)('music.163.com','/weapi/search/get','POST',{csrf_token:'',limit:a,type:r,s:s,offset:n},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/search/hot',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id;Object(i.a)('music.163.com','/weapi/search/hot','POST',{type:1111},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/search/multimatch',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={csrf_token:'',type:e.query.type||1,s:e.query.keywords||''};Object(i.a)('music.163.com','/weapi/search/suggest/multimatch','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/search/suggest',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={csrf_token:'',s:e.query.keywords||''};Object(i.a)('music.163.com','/weapi/search/suggest/web','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/send/playlist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.user_ids,r={id:e.query.playlist,type:'playlist',msg:e.query.msg,userIds:'['+s+']',csrf_token:''};Object(i.a)('music.163.com','/weapi/msg/private/send','POST',r,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/send/text',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.user_ids,r={type:'text',msg:e.query.msg,userIds:'['+s+']',csrf_token:''};console.log(r),Object(i.a)('music.163.com','/weapi/msg/private/send','POST',r,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/simi/artist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.id;Object(i.a)('music.163.com','/weapi/discovery/simiArtist','POST',{artistid:s,csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/simi/mv',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={mvid:e.query.mvid};Object(i.a)('music.163.com','/weapi/discovery/simiMV','POST',s,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/simi/playlist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={songid:e.query.id};Object(i.a)('music.163.com','/weapi/discovery/simiPlaylist','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/simi/song',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={songid:e.query.id};Object(i.a)('music.163.com','/weapi/v1/discovery/simiSong','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/simi/user',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={songid:e.query.id};Object(i.a)('music.163.com','/weapi/discovery/simiUser','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/song/detail',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=parseInt(e.query.ids),a={c:r()([{id:s}]),ids:'['+s+']',csrf_token:''};console.log(a),Object(i.a)('music.163.com','/weapi/v3/song/detail','POST',a,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/album',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={offset:e.query.offset||0,total:!0,limit:e.query.limit||50,area:e.query.type,csrf_token:''};Object(i.a)('music.163.com','/weapi/album/new','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/artists',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={offset:e.query.offset||0,total:!0,limit:e.query.limit||50,csrf_token:''};Object(i.a)('music.163.com','/weapi/artist/top','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/list',function(e,t){var o=e.query.idx,s={0:['\u4E91\u97F3\u4E50\u65B0\u6B4C\u699C','3779629'],1:['\u4E91\u97F3\u4E50\u70ED\u6B4C\u699C','3778678'],2:['\u7F51\u6613\u539F\u521B\u6B4C\u66F2\u699C','2884035'],3:['\u4E91\u97F3\u4E50\u98D9\u5347\u699C','19723756'],4:['\u4E91\u97F3\u4E50\u7535\u97F3\u699C','10520166'],5:['UK\u6392\u884C\u699C\u5468\u699C','180106'],6:['\u7F8E\u56FDBillboard\u5468\u699C','60198'],7:['KTV\u55E8\u699C','21845217'],8:['iTunes\u699C','11641012'],9:['Hit FM Top\u699C','120001'],10:['\u65E5\u672COricon\u5468\u699C','60131'],11:['\u97E9\u56FDMelon\u6392\u884C\u699C\u5468\u699C','3733003'],12:['\u97E9\u56FDMnet\u6392\u884C\u699C\u5468\u699C','60255'],13:['\u97E9\u56FDMelon\u539F\u58F0\u5468\u699C','46772709'],14:['\u4E2D\u56FDTOP\u6392\u884C\u699C(\u6E2F\u53F0\u699C)','112504'],15:['\u4E2D\u56FDTOP\u6392\u884C\u699C(\u5185\u5730\u699C)','64016'],16:['\u9999\u6E2F\u7535\u53F0\u4E2D\u6587\u6B4C\u66F2\u9F99\u864E\u699C','10169002'],17:['\u534E\u8BED\u91D1\u66F2\u699C','4395559'],18:['\u4E2D\u56FD\u563B\u54C8\u699C','1899724'],19:['\u6CD5\u56FD NRJ EuroHot 30\u5468\u699C','27135204'],20:['\u53F0\u6E7EHito\u6392\u884C\u699C','112463'],21:['Beatport\u5168\u7403\u7535\u5B50\u821E\u66F2\u699C','3812895'],22:['\u4E91\u97F3\u4E50ACG\u97F3\u4E50\u699C','71385702'],23:['\u4E91\u97F3\u4E50\u563B\u54C8\u699C','991319590']}[o][1],r=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v3/playlist/detail','POST',{id:s,n:1e4,csrf_token:''},r,function(e){t.setHeader('Content-Type','application/json'),t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/mv',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={offset:e.query.offset||0,total:!0,limit:e.query.limit||30,csrf_token:''};Object(i.a)('music.163.com','/weapi/mv/toplist','POST',s,o,function(e){t.setHeader('Content-Type','application/json'),t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/playlist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={cat:e.query.cat||'\u5168\u90E8',order:e.query.order||'hot',offset:e.query.offset||0,total:e.query.total?'true':'false',limit:e.query.limit||50};Object(i.a)('music.163.com','/weapi/playlist/list','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/playlist/highquality',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={cat:e.query.cat||'\u5168\u90E8',offset:e.query.offset||0,limit:e.query.limit||20,csrf_token:''};Object(i.a)('music.163.com','/weapi/playlist/highquality/list','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/top/song',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/discovery/new/songs','POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/toplist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/toplist','POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/toplist/artist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={type:e.query.type,csrf_token:''};Object(i.a)('music.163.com','/eapi/toplist/artist?params=B5CAE4715306477C2EFA74D383640F01BF227BF8E889F80E2E2A442958463A7E589CC99878CFCE88D165B64712332AF39EC61B7E68903B2F9F079E8D1AB99FC61049A6D5B97AF8E6FFE8DA16ED540D2CFA80205B889ACA39F8B05AE593FDF5A094F118FF4600C2025094ECF6EB58F6D424B7A97B21A8C1D7CF0609AF2FBE9FDD88826E1667C889757BA920684C5C425FF01B5514AF1EB08AB7D298DB4D65187829E315F9FFBBEB43C2AE3DC21222B31CEC6FF337957AC122FBCB3E793FC1960151B0BDEBB1565BFD835E7A7D6A2D034A5591070D42C32DA4B69E0061C46D61239221A1C64EF676D891B44D7B855E27C82A7EB376F0B0C27952F2006E302B47DA1DE86C3488D53FD98ED9FDC6AA341DF0ECF92BA2E8F77E41811BF9447973C5C34FFED13E28AC544347F9E6ADF4B0008C371FC41C4490D3C9E1A225791D2170326231C40662633AA93D5CEF9AABC777AF268A4B13C560157339478DFAD5D910C966B43E1F017410DBF06D189E2BD6D0CD2682F343A83994E66CA73B5E2A67A122842BF945F2B434CBDE4C5A589A3A90F70DF1A8B63E7BAFBEB624956C62CFB1114AB841379541E5BB4625F2C28CAEA6A67E77A7EEAA1149D9D0F7E190D3A3408DF88B62FBF27996ABC925A93E5A67B4B0D1D931214BB07064F2BA4DCBA2E548E5A110E9B992C21E3930EB488172929C02C06D76BB193EF923D1906E0A0C4D75F5EB909AE77B0A2E55539A182D0B2533C654F2C90A038406B8850BFC022639F2B3FB7EDF40FD74AEA0B9119E9987D2909C01C587794F53459DB8EE83AA8D15FBEAC71EB3A00D8E40E78FE9A9A4068495D9257B39D8F825086F391FD5E7A48AACA96BC261E334A1929C81633234A0B22C573AEAD05BC8B4216283ACFD9E022950AEC812F554B913B4457FDF68AA2CC5E476922C2670D49154BC1DEB6D464F60DBFAD2BB4144762CD3721F52D42FDAE56DB9C529EDB6FB946CD725B3E2EA2AFDCF3F759D384B4F7F75AAA6F01F8093C8A140B3B388FF57272A6A7E10274290A79CDCA69E37BC066CE8CCD5B4BB4E12DA841B','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/toplist/detail',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={id:e.query.id,limit:20,csrf_token:''};Object(i.a)('music.163.com','/weapi/toplist/detail','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/audio',function(e,t){var o={userId:e.query.uid,csrf_token:''};console.log(o);var s=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/djradio/get/byuser','POST',o,s,function(e){t.setHeader('Content-Type','application/json'),t.send(e)},function(){t.status(502).send('fetch error')})}),c.get('/user/cloud',function(e,t){var o={limit:e.query.limit||10,offset:e.query.offset||0,csrf_token:''},s=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/cloud/get','POST',o,s,function(e){t.setHeader('Content-Type','application/json'),t.send(e)},function(){t.status(502).send('fetch error')})}),c.get('/user/cloud/search',function(e,t){var o={byids:e.query.id,id:e.query.id,csrf_token:''},s=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/v1/cloud/get/byids','POST',o,s,function(e){t.setHeader('Content-Type','application/json'),t.send(e)},function(){t.status(502).send('fetch error')})}),c.get('/user/detail',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.uid;Object(i.a)('music.163.com','/weapi/v1/user/detail/'+s,'POST',{csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/dj',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.uid,r={offset:e.query.offset||'0',limit:e.query.limit||30,csrf_token:''};Object(i.a)('music.163.com','/weapi/dj/program/'+s,'POST',r,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/event',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.uid;Object(i.a)('music.163.com','/weapi/event/get/'+s,'POST',{time:-1,getcounts:!0,csrf_token:''},o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/followeds',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={userId:e.query.uid,offset:e.query.offset||'0',limit:e.query.limit||30,csrf_token:''};Object(i.a)('music.163.com','/weapi/user/getfolloweds/','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/follows',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.uid,r={offset:e.query.offset||'0',limit:e.query.limit||30,order:!0};Object(i.a)('music.163.com','/weapi/user/getfollows/'+s,'POST',r,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/playlist',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={offset:e.query.offset||0,uid:e.query.uid,limit:e.query.limit||30,csrf_token:''};Object(i.a)('music.163.com','/weapi/user/playlist','POST',s,o,function(e){t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/record',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s={type:e.query.type||0,uid:e.query.uid,csrf_token:''};Object(i.a)('music.163.com','/weapi/v1/play/record','POST',s,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/subcount',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'';Object(i.a)('music.163.com','/weapi/subcount','POST',{csrf_token:''},o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),c.get('/user/update',function(e,t){var o=e.get('Cookie')?e.get('Cookie'):'',s=e.query.gender,r={avatarImgId:'0',birthday:e.query.birthday,city:e.query.city,gender:s,nickname:e.query.nickname,province:e.query.province,signature:e.query.signature,csrf_token:''};Object(i.a)('music.163.com','/weapi/user/profile/update','POST',r,o,function(e){return t.send(e)},function(){return t.status(502).send('fetch error')})}),t.a=c},function(e,t,o){var s=o(2),r=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(){return r.stringify.apply(r,arguments)}},function(e,t,o){'use strict';function s(){var e=['Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36','Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1','Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1','Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Mobile Safari/537.36','Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Mobile Safari/537.36','Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Mobile Safari/537.36','Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_2 like Mac OS X) AppleWebKit/603.2.4 (KHTML, like Gecko) Mobile/14F89;GameHelper','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/603.2.4 (KHTML, like Gecko) Version/10.1.1 Safari/603.2.4','Mozilla/5.0 (iPhone; CPU iPhone OS 10_0 like Mac OS X) AppleWebKit/602.1.38 (KHTML, like Gecko) Version/10.0 Mobile/14A300 Safari/602.1','Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36','Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:46.0) Gecko/20100101 Firefox/46.0','Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:46.0) Gecko/20100101 Firefox/46.0','Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)','Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)','Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)','Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Win64; x64; Trident/6.0)','Mozilla/5.0 (Windows NT 6.3; Win64, x64; Trident/7.0; rv:11.0) like Gecko','Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/13.10586','Mozilla/5.0 (iPad; CPU OS 10_0 like Mac OS X) AppleWebKit/602.1.38 (KHTML, like Gecko) Version/10.0 Mobile/14A300 Safari/602.1'],t=Math.floor(Math.random()*e.length);return e[t]}function r(e,t,o,r,i,a,l){r.csrf_token=i.match(/_csrf=[^(;|$)]+;/g)?i.match(/_csrf=[^(;|$)]+/g)[0].slice(6):'';var u=i.split('__proxy__')[1];i=i.split('__proxy__')[0];var p=Object(n.a)(r),m={url:'http://'+e+t,method:o,headers:{Accept:'*/*',"Accept-Language":'zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4',Connection:'keep-alive',"Content-Type":'application/x-www-form-urlencoded',Referer:'http://music.163.com',Host:'music.163.com',Cookie:i,"User-Agent":s()},body:d.stringify({params:p.params,encSecKey:p.encSecKey}),proxy:u};console.log('[request] '+m.method+' '+m.url+' proxy:'+m.proxy),c(m,function(e,t,o){if(e)console.error(e),l(e);else{var s=t.headers['set-cookie'];Array.isArray(s)&&(s=s.map(function(e){return e.replace(/.music.163.com/g,'')}).sort(function(e,t){return e.length-t.length})),a(o,s)}})}o.d(t,'b',function(){return c}),o.d(t,'a',function(){return r});var i=o(46),a=o.n(i),n=o(82),c=o(84),d=o(85);c.debug=!1},function(e,t,o){e.exports={default:o(47),__esModule:!0}},function(e,t,o){o(48),o(49),o(64),o(68),o(80),o(81),e.exports=o(2).Promise},function(){},function(e,t,o){'use strict';var s=o(50)(!0);o(26)(String,'String',function(e){this._t=e+'',this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=s(t,o),this._i+=e.length,{value:e,done:!1})})},function(e,t,o){var r=o(14),n=o(15);e.exports=function(e){return function(t,o){var c,a,d=n(t)+'',s=r(o),i=d.length;return 0>s||s>=i?e?'':void 0:(c=d.charCodeAt(s),55296>c||56319<c||s+1===i||56320>(a=d.charCodeAt(s+1))||57343<a?e?d.charAt(s):c:e?d.slice(s,s+2):(c-55296<<10)+(a-56320)+65536)}}},function(e,t,o){e.exports=!o(6)&&!o(27)(function(){return 7!=Object.defineProperty(o(17)('div'),'a',{get:function(){return 7}}).a})},function(e,t,o){var s=o(5);e.exports=function(e,t){if(!s(e))return e;var o,r;if(t&&'function'==typeof(o=e.toString)&&!s(r=o.call(e)))return r;if('function'==typeof(o=e.valueOf)&&!s(r=o.call(e)))return r;if(!t&&'function'==typeof(o=e.toString)&&!s(r=o.call(e)))return r;throw TypeError('Can\'t convert object to primitive value')}},function(e,t,o){e.exports=o(4)},function(e,t,o){'use strict';var s=o(55),r=o(28),i=o(20),a={};o(4)(a,o(1)('iterator'),function(){return this}),e.exports=function(e,t,o){e.prototype=s(a,{next:r(1,o)}),i(e,t+' Iterator')}},function(e,t,o){var s=o(3),r=o(56),a=o(32),i=o(19)('IE_PROTO'),n=function(){},c='prototype',d=function(){var e,t=o(17)('iframe'),s=a.length,r='<',i='>';for(t.style.display='none',o(33).appendChild(t),t.src='javascript:',e=t.contentWindow.document,e.open(),e.write(r+'script'+i+'document.F=Object'+r+'/script'+i),e.close(),d=e.F;s--;)delete d[c][a[s]];return d()};e.exports=Object.create||function(e,t){var o;return null===e?o=d():(n[c]=s(e),o=new n,n[c]=null,o[i]=e),void 0===t?o:r(o,t)}},function(e,t,o){var s=o(11),r=o(3),a=o(57);e.exports=o(6)?Object.defineProperties:function(e,t){r(e);for(var o,n=a(t),c=n.length,d=0;c>d;)s.f(e,o=n[d++],t[o]);return e}},function(e,t,o){var s=o(58),r=o(32);e.exports=Object.keys||function(e){return s(e,r)}},function(e,t,o){var s=o(12),r=o(18),a=o(60)(!1),i=o(19)('IE_PROTO');e.exports=function(e,t){var o,n=r(e),c=0,d=[];for(o in n)o!=i&&s(n,o)&&d.push(o);for(;t.length>c;)s(n,o=t[c++])&&(~a(d,o)||d.push(o));return d}},function(e,t,o){var s=o(13);e.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==s(e)?e.split(''):Object(e)}},function(e,t,o){var s=o(18),r=o(29),i=o(61);e.exports=function(e){return function(t,o,a){var n,c=s(t),d=r(c.length),l=i(a,d);if(e&&o!=o){for(;d>l;)if(n=c[l++],n!=n)return!0;}else for(;d>l;l++)if((e||l in c)&&c[l]===o)return e||l||0;return!e&&-1}}},function(e,t,o){var s=o(14),r=Math.max,i=Math.min;e.exports=function(e,t){return e=s(e),0>e?r(e+t,0):i(e,t)}},function(e,t,o){var s=o(12),r=o(63),i=o(19)('IE_PROTO'),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),s(e,i)?e[i]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,o){var s=o(15);e.exports=function(e){return Object(s(e))}},function(e,t,o){o(65);for(var s=o(0),r=o(4),a=o(7),n=o(1)('toStringTag'),c='CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList'.split(','),d=0;d<c.length;d++){var i=c[d],l=s[i],u=l&&l.prototype;u&&!u[n]&&r(u,n,i),a[i]=a.Array}},function(e,t,o){'use strict';var s=o(66),r=o(67),i=o(7),a=o(18);e.exports=o(26)(Array,'Array',function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,r(1)):'keys'==t?r(0,o):'values'==t?r(0,e[o]):r(0,[o,e[o]])},'values'),i.Arguments=i.Array,s('keys'),s('values'),s('entries')},function(e){e.exports=function(){}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,o){'use strict';var s,r,i,a,n=o(16),c=o(0),d=o(9),l=o(34),u=o(8),p=o(5),m=o(10),g=o(69),f=o(70),k=o(35),y=o(36).set,C=o(75)(),h=o(21),_=o(37),T=o(76),S=o(38),A='Promise',q=c.TypeError,P=c.process,O=P&&P.versions,E=O&&O.v8||'',w=c[A],v='process'==l(P),x=function(){},b=r=h.f,B=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[o(1)('species')]=function(e){e(x,x)};return(v||'function'==typeof PromiseRejectionEvent)&&e.then(x)instanceof t&&0!==E.indexOf('6.6')&&-1===T.indexOf('Chrome/66')}catch(t){}}(),F=function(e){var t;return p(e)&&'function'==typeof(t=e.then)&&t},D=function(e,t){if(!e._n){e._n=!0;var o=e._c;C(function(){for(var s=e._v,r=1==e._s,a=0,i=function(t){var o,i,a,n=r?t.ok:t.fail,c=t.resolve,d=t.reject,l=t.domain;try{n?(!r&&(2==e._h&&I(e),e._h=1),!0===n?o=s:(l&&l.enter(),o=n(s),l&&(l.exit(),a=!0)),o===t.promise?d(q('Promise-chain cycle')):(i=F(o))?i.call(o,c,d):c(o)):d(s)}catch(t){l&&!a&&l.exit(),d(t)}};o.length>a;)i(o[a++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){y.call(c,function(){var t,o,s,r=e._v,i=R(e);if(i&&(t=_(function(){v?P.emit('unhandledRejection',r,e):(o=c.onunhandledrejection)?o({promise:e,reason:r}):(s=c.console)&&s.error&&s.error('Unhandled promise rejection',r)}),e._h=v||R(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){y.call(c,function(){var t;v?P.emit('rejectionHandled',e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),D(t,!0))},j=function(e){var t,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===e)throw q('Promise can\'t be resolved itself');(t=F(e))?C(function(){var s={_w:o,_d:!1};try{t.call(e,d(j,s,1),d(L,s,1))}catch(t){L.call(s,t)}}):(o._v=e,o._s=1,D(o,!1))}catch(t){L.call({_w:o,_d:!1},t)}}};B||(w=function(e){g(this,w,A,'_h'),m(e),s.call(this);try{e(d(j,this,1),d(L,this,1))}catch(e){L.call(this,e)}},s=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},s.prototype=o(77)(w.prototype,{then:function(e,t){var o=b(k(this,w));return o.ok='function'!=typeof e||e,o.fail='function'==typeof t&&t,o.domain=v?P.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&D(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new s;this.promise=e,this.resolve=d(j,e,1),this.reject=d(L,e,1)},h.f=b=function(e){return e===w||e===a?new i(e):r(e)}),u(u.G+u.W+u.F*!B,{Promise:w}),o(20)(w,A),o(78)(A),a=o(2)[A],u(u.S+u.F*!B,A,{reject:function(e){var t=b(this),o=t.reject;return o(e),t.promise}}),u(u.S+u.F*(n||!B),A,{resolve:function(e){return S(n&&this===a?w:this,e)}}),u(u.S+u.F*!(B&&o(79)(function(e){w.all(e)['catch'](x)})),A,{all:function(e){var t=this,o=b(t),s=o.resolve,r=o.reject,i=_(function(){var o=[],i=0,a=1;f(e,!1,function(e){var n=i++,c=!1;o.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,o[n]=e,--a||s(o))},r)}),--a||s(o)});return i.e&&r(i.v),o.promise},race:function(e){var t=this,o=b(t),s=o.reject,r=_(function(){f(e,!1,function(e){t.resolve(e).then(o.resolve,s)})});return r.e&&s(r.v),o.promise}})},function(e){e.exports=function(e,t,o,s){if(!(e instanceof t)||s!==void 0&&s in e)throw TypeError(o+': incorrect invocation!');return e}},function(e,t,o){var s=o(9),r=o(71),i=o(72),a=o(3),n=o(29),c=o(73),d={},l={},t=e.exports=function(e,t,o,u,p){var m,g,k,y,C=p?function(){return e}:c(e),h=s(o,u,t?2:1),f=0;if('function'!=typeof C)throw TypeError(e+' is not iterable!');if(i(C)){for(m=n(e.length);m>f;f++)if(y=t?h(a(g=e[f])[0],g[1]):h(e[f]),y===d||y===l)return y;}else for(k=C.call(e);!(g=k.next()).done;)if(y=r(k,h,g.value,t),y===d||y===l)return y};t.BREAK=d,t.RETURN=l},function(e,t,o){var s=o(3);e.exports=function(t,e,o,r){try{return r?e(s(o)[0],o[1]):e(o)}catch(o){var i=t['return'];throw void 0!==i&&s(i.call(t)),o}}},function(e,t,o){var s=o(7),r=o(1)('iterator'),i=Array.prototype;e.exports=function(e){return e!==void 0&&(s.Array===e||i[r]===e)}},function(e,t,o){var s=o(34),r=o(1)('iterator'),i=o(7);e.exports=o(2).getIteratorMethod=function(e){if(e!=void 0)return e[r]||e['@@iterator']||i[s(e)]}},function(e){e.exports=function(e,t,o){var s=o===void 0;switch(t.length){case 0:return s?e():e.call(o);case 1:return s?e(t[0]):e.call(o,t[0]);case 2:return s?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return s?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return s?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3]);}return e.apply(o,t)}},function(e,t,o){var s=o(0),r=o(36).set,i=s.MutationObserver||s.WebKitMutationObserver,a=s.process,n=s.Promise,c='process'==o(13)(a);e.exports=function(){var t,o,d,e=function(){var e,s;for(c&&(e=a.domain)&&e.exit();t;){s=t.fn,t=t.next;try{s()}catch(s){throw t?d():o=void 0,s}}o=void 0,e&&e.enter()};if(c)d=function(){a.nextTick(e)};else if(i&&!(s.navigator&&s.navigator.standalone)){var l=!0,u=document.createTextNode('');new i(e).observe(u,{characterData:!0}),d=function(){u.data=l=!l}}else if(n&&n.resolve){var p=n.resolve(void 0);d=function(){p.then(e)}}else d=function(){r.call(s,e)};return function(e){var s={fn:e,next:void 0};o&&(o.next=s),t||(t=s,d()),o=s}}},function(e,t,o){var s=o(0),r=s.navigator;e.exports=r&&r.userAgent||''},function(e,t,o){var s=o(4);e.exports=function(e,t,o){for(var r in t)o&&e[r]?e[r]=t[r]:s(e,r,t[r]);return e}},function(e,t,o){'use strict';var s=o(0),r=o(2),i=o(11),a=o(6),n=o(1)('species');e.exports=function(e){var t='function'==typeof r[e]?r[e]:s[e];a&&t&&!t[n]&&i.f(t,n,{configurable:!0,get:function(){return this}})}},function(e,t,o){var s=o(1)('iterator'),r=!1;try{var i=[7][s]();i['return']=function(){r=!0},Array.from(i,function(){throw 2})}catch(t){}e.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var i=[7],a=i[s]();a.next=function(){return{done:o=!0}},i[s]=function(){return a},e(i)}catch(t){}return o}},function(e,t,o){'use strict';var s=o(8),r=o(2),i=o(0),a=o(35),n=o(38);s(s.P+s.R,'Promise',{finally:function(t){var o=a(this,r.Promise||i.Promise),e='function'==typeof t;return this.then(e?function(e){return n(o,t()).then(function(){return e})}:t,e?function(s){return n(o,t()).then(function(){throw s})}:t)}})},function(e,t,o){'use strict';var s=o(8),r=o(21),i=o(37);s(s.S,'Promise',{try:function(e){var t=r.f(this),o=i(e);return(o.e?t.reject:t.resolve)(o.v),t.promise}})},function(e,t,o){'use strict';function s(e){for(var t,o='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',s='',r=0;r<e;r++)t=Math.random()*o.length,t=Math.floor(t),s+=o.charAt(t);return s}function r(e,t){var o=new Buffer('0102030405060708','binary'),s=new Buffer(t,'binary'),r=l.createCipheriv('AES-128-CBC',s,o),i=r.update(e,'utf8','base64');return i+=r.final('base64'),i}function i(e,t){for(;e.length<t;)e='0'+e;return e}function a(e,t,o){var s=e.split('').reverse().join(''),r=u(new Buffer(s).toString('hex'),16),a=u(t,16),n=u(o,16),c=r.modPow(a,n);return i(c.toString(16),256)}function n(e){var t=d()(e),o=s(16),i=r(r(t,m),o),n=a(o,g,p);return{params:i,encSecKey:n}}o.d(t,'a',function(){return n});var c=o(24),d=o.n(c),l=o(25),u=o(83),p='00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7',m='0CoJUm6Qyw8W8jud',g='010001';String.prototype.hexEncode=function(){var e=void 0,t=void 0,o='';for(t=0;t<this.length;t++)e=this.charCodeAt(t).toString(16),o+=(''+e).slice(-4);return o}},function(e){e.exports=require('big-integer')},function(e){e.exports=require('request')},function(e){e.exports=require('querystring')}]);